
## OTA 功能说明

**实现原理：**
在 Linux 环境下，小智作为独立进程运行，其 OTA 升级本质上是**应用层文件的原子替换**。升级过程通过下载最新的可执行二进制文件，在保留核心持久化配置文件（`xiaozhi_config.json`）的前提下，完成逻辑替换并重启进程。

### 注意事项

1. **配置向下兼容**：
* 新版程序必须能够读取旧版的配置文件。在 Rust 代码中应使用 `#[serde(default)]` 为新字段提供默认值，防止因配置文件缺少新参数而导致启动失败。


2. **系统库依赖校验**：
* 升级包需匹配原设备中的动态链接库（如 `libasound`、`libopus`）。新编译的应用链接的动态库与设备中的不匹配，新编译的二进制可能无法运行。


3. **资源文件同步**：
* 若升级涉及本地提示音、模型文件或 UI 素材的变更，需在替换二进制文件的同时，同步更新对应的资源目录。


4. **外部生命周期管理**：
* 小智进程不应负责自我重启。OTA 脚本在替换文件后，应负责小智进程的重启。



